An interesting pattern that I have used a couple of times in production.

Basically, you can control the flow of a generator to create batches.
